# CyberSentinel SyslogServer - Deployment Configuration Template
# ============================================================================
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.template .env
# 2. Update SERVER_IP with your server's actual IP address (required for frontend)
#    Get your IP with: hostname -I | awk '{print $1}'
# 3. Update all passwords and secret keys with secure values
# 4. Deploy using: docker-compose up -d
# 5. Access the frontend at: http://SERVER_IP:3000
# 6. Access the API at: http://SERVER_IP:8000
# ============================================================================

# =============================================================================
# SERVER CONFIGURATION (REQUIRED)
# =============================================================================
# Replace with your server's actual IP address
# This is used for the frontend to connect to the API
# Example: SERVER_IP=192.168.1.100 or SERVER_IP=10.0.0.50
SERVER_IP=0.0.0.0

# =============================================================================
# API SERVICE SETTINGS
# =============================================================================
# CORS Origins - Controls which domains can access the API
# Use "*" to allow all origins (development/testing)
# For production, specify exact origins:
# API_CORS_ORIGINS=http://192.168.1.100:3000,https://yourdomain.com
API_CORS_ORIGINS=*

# Security Keys (CHANGE THESE IN PRODUCTION!)
API_SECRET_KEY=change-this-to-a-random-secret-key-in-production
JWT_SECRET_KEY=change-this-jwt-secret-in-production

# Token Settings
API_ACCESS_TOKEN_EXPIRE_MINUTES=60

# =============================================================================
# DATABASE CREDENTIALS
# =============================================================================
# PostgreSQL
POSTGRES_PASSWORD=change-this-password-in-production
POSTGRES_USER=cybersentinel
POSTGRES_DB=cybersentinel

# OpenSearch
OPENSEARCH_PASSWORD=admin
OPENSEARCH_USER=admin

# Redis (leave empty if no password)
REDIS_PASSWORD=

# =============================================================================
# FRONTEND SETTINGS
# =============================================================================
# API URL for the frontend - uses SERVER_IP from above
# The frontend container will use this to make API calls
REACT_APP_API_URL=http://${SERVER_IP}:8000

# =============================================================================
# SCALABILITY CONFIGURATION
# =============================================================================
# Configuration for handling 1000+ devices with 180-day log retention
# Adjust these values based on your actual workload

# Processor Configuration
PROCESSOR_REPLICAS=4               # Number of processor instances (scale as needed)
PROCESSOR_WORKERS=8                # Workers per processor instance
PROCESSOR_BATCH_SIZE=200           # Batch size for processing logs

# Receiver Configuration
RECEIVER_WORKERS=8                 # Number of receiver workers

# Log Retention
LOG_RETENTION_DAYS=180             # Automatic deletion after 180 days
OPENSEARCH_INDEX_ROTATION=daily    # Create new index daily

# =============================================================================
# RESOURCE LIMITS (Updated for High-Scale Deployment)
# =============================================================================
# These limits are optimized for 1000+ devices and 180-day retention
# Minimum server requirements: 16GB RAM, 8 CPU cores, 200GB SSD storage

RECEIVER_MAX_MEMORY=1g             # Syslog receiver memory limit
PROCESSOR_MAX_MEMORY=2g            # Log processor memory limit (per replica)
API_MAX_MEMORY=512m                # REST API memory limit
ALERTING_MAX_MEMORY=256m           # Alerting service memory limit
FRONTEND_MAX_MEMORY=256m           # Frontend memory limit
OPENSEARCH_MAX_MEMORY=4g           # OpenSearch memory limit
KAFKA_MAX_MEMORY=2g                # Kafka memory limit

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=INFO
ENVIRONMENT=production
